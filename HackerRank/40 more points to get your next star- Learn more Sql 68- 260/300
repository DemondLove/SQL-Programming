/*
We define an employee's total earnings to be their monthly salary * months worked, and the maximum total earnings to be the maximum total earnings for any employee in the Employee table. Write a query to find the maximum total earnings for all employees as well as the total number of employees who have maximum total earnings. Then print these values as 2 space-separated integers.
*/

SELECT employee_id, SUM(months*salary) AS 'Total_Earnings' 
INTO #cte1
FROM Employee
GROUP BY employee_id

SELECT MAX(Total_Earnings) AS Maximum_Total_Earnings INTO #cte2 FROM #cte1

SELECT 
    (SELECT Maximum_Total_Earnings FROM #cte2)
    , Count(employee_id)
FROM #cte1
WHERE Total_Earnings = (SELECT Maximum_Total_Earnings FROM #cte2)
